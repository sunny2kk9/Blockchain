<!DOCTYPE html>
<html>
<head>
    <title>Storage dApp</title>
</head>
<body>
    <h2>Getter Setter dApp</h2>

    <button id="connect">Connect Wallet</button>

    <br><br>

    <input id="value" type="number" placeholder="Enter a value">
    <button id="setBtn">Set Value</button>

    <br><br>

    <button id="getBtn">Get Value</button>
    <p id="output"></p>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>

<script>
    const contractAddress = "0x5FbDB2315678afecb367f032d93F642f64180aa3";

    const abi = [
        {
            "inputs":[{"internalType":"uint256","name":"_value","type":"uint256"}],
            "name":"set","outputs":[],"stateMutability":"nonpayable","type":"function"
        },
        {
            "inputs":[],"name":"get","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],
            "stateMutability":"view","type":"function"
        }
    ];

    let signer, contract;

    document.getElementById("connect").onclick = async () => {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        contract = new ethers.Contract(contractAddress, abi, signer);
        alert("Wallet connected");
    };

    document.getElementById("setBtn").onclick = async () => {
        const v = document.getElementById("value").value;
        await contract.set(v);
        alert("Value stored on blockchain");
    };

    document.getElementById("getBtn").onclick = async () => {
        const result = await contract.get();
        document.getElementById("output").innerText = "Stored Value: " + result;
    };
</script>

</body>
</html>
